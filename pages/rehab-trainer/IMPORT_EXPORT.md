# 数据导入导出使用指南

## 📤 导出数据

### 使用场景
- 备份训练计划
- 换设备时同步数据
- 分享训练计划给他人

### 操作步骤

1. **点击"导出数据"按钮**
   - 位置：在计划选择区下方
   - 图标：<i class="bi bi-download"></i> 绿色按钮

2. **下载文件**
   - 文件自动下载到浏览器默认下载位置
   - 文件名格式：`腰突康复训练_YYYY-MM-DD.json`
   - 例如：`腰突康复训练_2026-01-09.json`

3. **保存文件**
   - 建议保存到云盘（如iCloud、百度云等）
   - 或发送到其他设备

### 导出文件包含的内容

```json
{
  "version": "1.0",
  "exportTime": "2026-01-09T07:45:20.277Z",
  "data": {
    "plans": [
      {
        "id": "...",
        "name": "我的训练计划",
        "exercises": [
          // 所有训练项
        ]
      }
    ],
    "activePlanId": "...",
    "settings": {
      "voiceRate": 1.0,
      "voiceVolume": 1.0,
      "prepareTime": 10
    }
  }
}
```

---

## 📥 导入数据

### 使用场景
- 恢复备份的训练计划
- 在新设备上导入数据
- 导入别人分享的训练计划

### 操作步骤

1. **准备JSON文件**
   - 确保有之前导出的JSON文件
   - 文件必须是`.json`格式

2. **点击"导入数据"按钮**
   - 位置：在计划选择区下方
   - 图标：<i class="bi bi-upload"></i> 蓝色按钮

3. **选择文件**
   - 浏览器会打开文件选择对话框
   - 选择要导入的JSON文件

4. **确认导入**
   - 系统会显示确认对话框
   - 提示：导入的计划数量
   - ⚠️ **警告**：导入会覆盖当前所有数据

5. **导入完成**
   - 成功后显示"数据导入成功！"提示
   - 页面自动刷新，显示导入的计划

### ⚠️ 重要提示

1. **数据会被覆盖**
   - 导入会替换所有现有数据
   - 建议先导出备份当前数据

2. **文件格式验证**
   - 只接受`.json`格式文件
   - 文件内容会自动验证
   - 格式错误会提示失败

3. **安全建议**
   - 只导入可信来源的文件
   - 导入前检查文件内容

---

## 💡 使用场景示例

### 场景1：手机和电脑同步

```
手机上：
1. 配置好所有训练计划
2. 点击"导出数据"
3. 将JSON文件通过微信/邮件发送到电脑

电脑上：
1. 打开网页
2. 点击"导入数据"
3. 选择从手机发来的JSON文件
4. 确认导入
```

### 场景2：备份和恢复

```
定期备份：
- 每周导出一次数据
- 保存到云盘或电脑

恢复数据：
- 清除浏览器数据后
- 或换新设备时
- 导入之前的备份文件
```

### 场景3：分享训练计划

```
康复教练：
1. 设计专业的康复训练计划
2. 导出JSON文件
3. 分享给患者

患者：
1. 收到JSON文件
2. 导入到自己的设备
3. 立即开始训练
```

---

## 🔄 数据迁移完整流程

### 从设备A迁移到设备B

**设备A（旧设备）：**
```
1. 打开 rehabTrainer.html
2. 点击"导出数据"
3. 保存文件到云盘/邮件发送
```

**设备B（新设备）：**
```
1. 打开 rehabTrainer.html
2. （可选）先导出当前数据作为备份
3. 点击"导入数据"
4. 选择从设备A导出的JSON文件
5. 确认导入
6. ✅ 完成！所有计划和训练项都同步过来了
```

---

## 📋 数据格式说明

### 导出文件结构

```
{
  version: "1.0"           # 数据格式版本
  exportTime: "..."        # 导出时间
  data: {
    plans: [...]           # 所有训练计划
    activePlanId: "..."    # 当前激活的计划ID
    settings: {...}        # 应用设置
  }
}
```

### 兼容性

- ✅ 向前兼容：旧版本导出的文件可以导入新版本
- ✅ 数据验证：导入前会验证数据完整性
- ✅ 错误处理：格式错误会明确提示

---

## 🛡️ 安全建议

1. **定期备份**
   - 建议每周或每次修改后导出备份
   - 保存多个版本以防数据损坏

2. **验证导入**
   - 导入前可以用文本编辑器查看JSON内容
   - 确认计划名称和训练项正确

3. **谨慎操作**
   - 导入前先导出当前数据
   - 如果导入错误，可以立即恢复

---

## ❓ 常见问题

### Q: 导出的文件在哪里？
**A:** 浏览器默认下载文件夹，通常是`~/Downloads/`

### Q: 可以编辑导出的JSON文件吗？
**A:** 可以，但需要保持JSON格式正确。不建议手动编辑，除非您熟悉JSON格式。

### Q: 导入失败怎么办？
**A:** 
- 检查文件是否为`.json`格式
- 确认文件没有损坏
- 查看控制台错误信息
- 尝试重新导出文件

### Q: 能否导入部分数据？
**A:** 目前导入是全量替换。如果只想添加几个训练项，建议手动添加。

---

## 💾 数据存储位置

- **本地存储**: localStorage（浏览器本地）
- **导出文件**: 下载文件夹
- **备份建议**: 云盘或多个设备保存

---

**提示**: 数据导入导出功能让您的训练计划永不丢失，随时随地都能继续训练！💪
